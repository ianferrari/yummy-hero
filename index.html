<!DOCTYPE html>
<html lang="zh-TW">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>é¤æ¡Œå°éšŠé•·</title>
    <style>
        /* åŸºç¤è¨­å®šï¼šç¦æ­¢é¸å–ã€æ»¿ç‰ˆé¡¯ç¤º */
        body {
            font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, sans-serif;
            background-color: #FFF8E1; /* æº«æš–çš„è›‹é»ƒè‰² */
            margin: 0;
            height: 100vh;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: space-evenly;
            overflow: hidden; /* ç¦æ­¢æ²å‹• */
            user-select: none; /* ç¦æ­¢å°å­©é¸å–æ–‡å­— */
            -webkit-user-select: none;
        }

        h1 {
            color: #F57F17;
            font-size: 1.5rem;
            margin: 0;
        }

        /* ç†Šè²“é¡¯ç¤ºå€ */
        .panda-container {
            font-size: 8rem; /* ç†Šè²“è¶…ç´šå¤§ */
            transition: transform 0.2s;
            cursor: default;
        }

        /* åƒæ±è¥¿çš„å‹•ç•«æ•ˆæœ */
        .eating {
            transform: scale(1.2);
        }

        /* å°è©±æ¡† */
        .message-box {
            height: 30px;
            color: #5D4037;
            font-weight: bold;
            font-size: 1.2rem;
        }

        /* é€²åº¦æ¢å®¹å™¨ */
        .progress-container {
            width: 80%;
            height: 20px;
            background-color: #FFE082;
            border-radius: 10px;
            overflow: hidden;
            border: 2px solid #FFCA28;
        }

        /* å¯¦éš›é€²åº¦ */
        .progress-bar {
            height: 100%;
            width: 100%; /* ä¸€é–‹å§‹æ˜¯æ»¿çš„ */
            background-color: #66BB6A; /* ç¶ è‰²ä»£è¡¨é£Ÿç‰©é‚„å¾ˆå¤š */
            transition: width 0.5s, background-color 0.5s;
        }

        /* å‰©é¤˜å£æ•¸é¡¯ç¤º */
        .count-display {
            font-size: 1.2rem;
            color: #8D6E63;
        }

        /* é¤µé£ŸæŒ‰éˆ• */
        .feed-btn {
            background-color: #FF6F00;
            color: white;
            border: none;
            border-radius: 50px;
            padding: 20px 60px;
            font-size: 1.5rem;
            font-weight: bold;
            box-shadow: 0 4px 0 #E65100; /* æŒ‰éˆ•ç«‹é«”æ„Ÿ */
            active: transform: translateY(4px); /* æŒ‰ä¸‹æ•ˆæœ */
            transition: all 0.1s;
        }

        .feed-btn:active {
            box-shadow: 0 0 0 #E65100;
            transform: translateY(4px);
        }

        .feed-btn:disabled {
            background-color: #BDBDBD;
            box-shadow: none;
            cursor: not-allowed;
        }

        /* å®Œæˆå¾Œçš„çå‹µç•«é¢ */
        .hidden {
            display: none;
        }
    </style>
</head>
<body>

    <h1>ç†Šè²“è‚šå­é¤“äº†ï¼</h1>

    <div class="message-box" id="message">æˆ‘æƒ³è¦åƒé£¯é£¯...</div>

    <div class="panda-container" id="panda">ğŸ¼</div>

    <div class="progress-container">
        <div class="progress-bar" id="progressBar"></div>
    </div>
    <div class="count-display">é‚„å‰©ä¸‹ <span id="count">20</span> å£</div>

    <button class="feed-btn" id="feedBtn" onclick="feedPanda()">é¤µç†Šè²“åƒä¸€å£ ğŸ¥„</button>

    <script>
        // --- è¨­å®šå€ ---
        let totalBites = 20; // è¨­å®šç¸½å…±è¦åƒå¹¾å£
        let currentBites = totalBites;
        
        // --- DOM å…ƒç´  ---
        const panda = document.getElementById('panda');
        const message = document.getElementById('message');
        const countSpan = document.getElementById('count');
        const progressBar = document.getElementById('progressBar');
        const btn = document.getElementById('feedBtn');

        // --- æ ¸å¿ƒåŠŸèƒ½ ---
        function feedPanda() {
            if (currentBites <= 0) return;

            // 1. æ¸›å°‘å£æ•¸
            currentBites--;
            countSpan.innerText = currentBites;

            // 2. æ›´æ–°é€²åº¦æ¢
            let percentage = (currentBites / totalBites) * 100;
            progressBar.style.width = percentage + "%";
            
            // è®Šæ›´é€²åº¦æ¢é¡è‰² (å¿«åƒå®Œè®Šç´…è‰²)
            if (percentage < 30) {
                progressBar.style.backgroundColor = "#EF5350";
            }

            // 3. æ’­æ”¾å‹•ç•«èˆ‡éŸ³æ•ˆ
            panda.classList.add('eating');
            panda.innerText = "ğŸ˜‹"; // è®Šè‡‰
            message.innerText = "é˜¿å§†ï¼çœŸå¥½åƒï¼";
            
            // 4. 0.5ç§’å¾Œå¾©åŸ
            setTimeout(() => {
                panda.classList.remove('eating');
                if (currentBites > 0) {
                    panda.innerText = "ğŸ¼";
                    message.innerText = "é‚„è¦å†ä¸€å£...";
                } else {
                    finishEating();
                }
            }, 500);
        }

        // --- åƒå®Œçš„æ…¶ç¥ç•«é¢ ---
        function finishEating() {
            panda.innerText = "ğŸ¥³"; // æ…¶ç¥è¡¨æƒ…
            message.innerText = "åƒé£½äº†ï¼ä½ å¥½æ£’ï¼";
            btn.innerText = "ä»»å‹™å®Œæˆ ğŸ‰";
            btn.disabled = true;
            btn.style.backgroundColor = "#66BB6A";
            document.body.style.backgroundColor = "#E8F5E9"; // èƒŒæ™¯è®Šç¶ è‰²
            
            // ç°¡å–®çš„å½©å¸¶ç‰¹æ•ˆ (ç”¨ emoji æ¨¡æ“¬)
            let i = 0;
            let interval = setInterval(() => {
                if(i > 10) clearInterval(interval);
                createConfetti();
                i++;
            }, 200);
        }

        function createConfetti() {
            const confetti = document.createElement('div');
            confetti.innerText = ['ğŸ‰', 'âœ¨', 'â­', 'ğŸˆ'][Math.floor(Math.random() * 4)];
            confetti.style.position = 'absolute';
            confetti.style.left = Math.random() * 100 + 'vw';
            confetti.style.top = '-10vh';
            confetti.style.fontSize = '2rem';
            confetti.style.transition = 'top 2s ease-in';
            document.body.appendChild(confetti);

            setTimeout(() => {
                confetti.style.top = '110vh';
            }, 100);
        }
    </script>
</body>
</html>
